{"version":3,"sources":["../src/app.module.ts"],"sourcesContent":["import {MiddlewareConsumer, Module, NestModule} from '@nestjs/common';\r\nimport {APP_FILTER, APP_GUARD, APP_INTERCEPTOR} from '@nestjs/core';\r\nimport {ConfigModule, ConfigService} from '@nestjs/config';\r\nimport {TypeOrmModule} from '@nestjs/typeorm';\r\nimport {ThrottlerModule} from '@nestjs/throttler';\r\nimport {ServeStaticModule} from '@nestjs/serve-static';\r\nimport typeormDataSource from './config/data-source';\r\nimport {join} from 'path';\r\nimport {AppController} from './app.controller';\r\nimport {AppService} from './app.service';\r\nimport {AuthModule} from './User/auth/auth.module';\r\nimport {OtpModule} from './User/auth/otp/otp.module';\r\nimport {JwtAuthGuard} from './User/auth/guards/jwt.guard';\r\nimport {RolesGuard} from './User/auth/guards/roles.guard';\r\nimport {JwtStrategy} from './User/auth/strategy/jwt.strategy';\r\nimport {TokenModule} from './User/auth/token/token.module';\r\nimport {UserModule} from './User/user/user.module';\r\nimport {SessionModule} from './session/session.module';\r\nimport {SubscribeModule} from './User/subscribe/subscribe.module';\r\nimport {UserDetailModule} from './User/user-detail/userDetail.module';\r\nimport {UploadModule} from './upload/upload.module';\r\nimport {LoggingInterceptor} from './common/utils/logger.interseptor';\r\nimport {AllExceptionsFilter} from './common/exeptionFilters/global.error';\r\nimport {UserAgentMiddleware} from './common/middleware/user-agent.middleware';\r\nimport {AuctionModule} from './Market/auction/auction.module';\r\nimport {CollectionEntityModule} from './Market/collection/collection.module';\r\nimport {NFTModule} from './NFT/nft/nft.module';\r\nimport {ForumModule} from './Social/forum/forum.module';\r\nimport {SupportTicketModule} from './Social/Support-Ticket/ST/support-ticket.module';\r\nimport {UserService} from './User/user/user.service';\r\nimport {User} from './User/user/entity/user.entity';\r\nimport {Token} from './User/auth/token/entity/token.entity';\r\nimport {SmsService} from './services/sms.service';\r\nimport {IPFSService} from './services/IPFS.service';\r\nimport {PinataModule} from './NFT/pinta/pinta.module';\r\nimport {StoriesModule} from './Social/Story/stories/stories.module';\r\nimport {PostsModule} from './Social/Post/posts/posts.module';\r\nimport {Story} from './Social/Story/stories/entity/stories.entity';\r\nimport {Comment} from './Social/Comment/comment/entity/comment.entity';\r\nimport {Reply} from './Social/Comment/replyComment/entity/reply.entity';\r\nimport {likeComment} from './Social/Comment/like-comment/entity/like-comment.entity';\r\nimport {Post} from './Social/Post/posts/entity/posts.entity';\r\nimport {likePost} from './Social/Post/like-post/entity/like-post.entity';\r\nimport {likeStory} from './Social/Story/like-story/entity/like-story.entity';\r\nimport {RSTModule} from './Social/Support-Ticket/RST/RST.module';\r\nimport {Club} from './Social/Club/entity/club.entity';\r\nimport {NotificationModule} from './Social/Notification/notification.module';\r\nimport {WalletModule} from './NFT/wallet/wallet.module';\r\nimport {CryptoEntity} from './NFT/Crypto/entity/crypto.entity';\r\nimport {FollowUser} from './Social/Follow/entity/follow.entity';\r\nimport {LikePostModule} from \"@/Social/Post/like-post/like-post.module\";\r\nimport {SavePostModule} from \"@/Social/Post/save-post/save-post.module\";\r\nimport {savePost} from \"@/Social/Post/save-post/entity/save-post.entity\";\r\nimport {LikeStoryModule} from \"@/Social/Story/like-story/like-story.module\";\r\nimport { Notification } from './Social/Notification/entity/notification.entity';\r\nimport { NotificationService } from './Social/Notification/notification.service';\r\nimport { HttpModule } from '@nestjs/axios';\r\nimport { MessageModule } from './Social/Message/message/message.module';\r\nimport { LikeMessageModule } from './Social/Message/like-message/like-message.module';\r\n\r\n\r\n@Module({\r\n    imports: [\r\n        ThrottlerModule.forRoot([\r\n            {\r\n                ttl: 60000,\r\n                limit: 50,\r\n            },\r\n        ]),\r\n        ServeStaticModule.forRoot({\r\n            rootPath: join(__dirname, '..', 'public'),\r\n            serveRoot: '/public',\r\n        }),\r\n        ConfigModule.forRoot({\r\n            envFilePath: '.develop.env',\r\n        }),\r\n        TypeOrmModule.forRootAsync({\r\n            imports: [ConfigModule],\r\n            inject: [ConfigService],\r\n\r\n            useFactory: (configService: ConfigService) => {\r\n                const synchronize = configService.get('NODE_ENV') === 'development';\r\n\r\n                console.log('synchronize ' + synchronize);\r\n                console.log(typeormDataSource.options);\r\n\r\n\r\n                return {\r\n                    ...typeormDataSource.options,\r\n                    autoLoadEntities: true,\r\n                    connectTimeoutMS: 30000,\r\n                };\r\n            },\r\n        }),\r\n        TypeOrmModule.forFeature([\r\n            User,\r\n            Token,\r\n            Club,\r\n            Story,\r\n            Comment,\r\n            likeComment,\r\n            Reply,\r\n            Post,\r\n            likePost,\r\n            likeStory,\r\n            CryptoEntity,\r\n            FollowUser,\r\n            savePost,\r\n            Notification\r\n        ]),\r\n        AuctionModule,\r\n        CollectionEntityModule,\r\n        NFTModule,\r\n        ForumModule,\r\n        SupportTicketModule,\r\n        AuthModule,\r\n        UserModule,\r\n        UserDetailModule,\r\n        OtpModule,\r\n        SessionModule,\r\n        UploadModule,\r\n        SubscribeModule,\r\n        TokenModule,\r\n        PinataModule,\r\n        StoriesModule,\r\n        PostsModule,\r\n        LikePostModule,\r\n        LikeStoryModule,\r\n        SavePostModule,\r\n        RSTModule,\r\n        MessageModule,\r\n        LikeMessageModule,\r\n        NotificationModule,\r\n        WalletModule,\r\n        HttpModule\r\n    ],\r\n    controllers: [AppController,],\r\n    providers: [\r\n        AppService,\r\n        UserService,\r\n        IPFSService,\r\n        SmsService,\r\n        NotificationService,\r\n        JwtStrategy,\r\n        {\r\n            provide: APP_GUARD,\r\n            useClass: JwtAuthGuard,\r\n        },\r\n        {\r\n            provide: APP_GUARD,\r\n            useClass: RolesGuard,\r\n        },\r\n        {\r\n            provide: APP_INTERCEPTOR,\r\n            useClass: LoggingInterceptor,\r\n        },\r\n        {\r\n            provide: APP_FILTER,\r\n            useClass: AllExceptionsFilter,\r\n        },\r\n    ],\r\n    exports: [IPFSService]\r\n})\r\nexport class AppModule implements NestModule {\r\n    configure(consumer: MiddlewareConsumer) {\r\n        consumer.apply(UserAgentMiddleware).forRoutes('*');\r\n    }\r\n}\r\n"],"names":["AppModule","configure","consumer","apply","UserAgentMiddleware","forRoutes","imports","ThrottlerModule","forRoot","ttl","limit","ServeStaticModule","rootPath","join","__dirname","serveRoot","ConfigModule","envFilePath","TypeOrmModule","forRootAsync","inject","ConfigService","useFactory","configService","synchronize","get","console","log","typeormDataSource","options","autoLoadEntities","connectTimeoutMS","forFeature","User","Token","Club","Story","Comment","likeComment","Reply","Post","likePost","likeStory","CryptoEntity","FollowUser","savePost","Notification","AuctionModule","CollectionEntityModule","NFTModule","ForumModule","SupportTicketModule","AuthModule","UserModule","UserDetailModule","OtpModule","SessionModule","UploadModule","SubscribeModule","TokenModule","PinataModule","StoriesModule","PostsModule","LikePostModule","LikeStoryModule","SavePostModule","RSTModule","MessageModule","LikeMessageModule","NotificationModule","WalletModule","HttpModule","controllers","AppController","providers","AppService","UserService","IPFSService","SmsService","NotificationService","JwtStrategy","provide","APP_GUARD","useClass","JwtAuthGuard","RolesGuard","APP_INTERCEPTOR","LoggingInterceptor","APP_FILTER","AllExceptionsFilter","exports"],"mappings":";;;;+BAmKaA;;;eAAAA;;;wBAnKwC;sBACA;wBACX;yBACd;2BACE;6BACE;mEACF;sBACX;+BACS;4BACH;4BACA;2BACD;0BACG;4BACF;6BACC;6BACA;4BACD;+BACG;iCACE;kCACC;8BACJ;mCACM;6BACC;qCACA;+BACN;kCACS;2BACb;6BACE;qCACQ;6BACR;4BACP;6BACC;4BACK;6BACC;6BACC;+BACC;6BACF;+BACN;+BACE;6BACF;mCACM;6BACP;gCACI;iCACC;2BACA;4BACL;oCACc;8BACN;8BACA;8BACF;gCACI;gCACA;gCACN;iCACO;oCACD;qCACO;uBACT;+BACG;mCACI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyG3B,IAAA,AAAMA,YAAN,MAAMA;IACTC,UAAUC,QAA4B,EAAE;QACpCA,SAASC,KAAK,CAACC,wCAAmB,EAAEC,SAAS,CAAC;IAClD;AACJ;;;QAzGIC,SAAS;YACLC,0BAAe,CAACC,OAAO,CAAC;gBACpB;oBACIC,KAAK;oBACLC,OAAO;gBACX;aACH;YACDC,8BAAiB,CAACH,OAAO,CAAC;gBACtBI,UAAUC,IAAAA,UAAI,EAACC,WAAW,MAAM;gBAChCC,WAAW;YACf;YACAC,oBAAY,CAACR,OAAO,CAAC;gBACjBS,aAAa;YACjB;YACAC,sBAAa,CAACC,YAAY,CAAC;gBACvBb,SAAS;oBAACU,oBAAY;iBAAC;gBACvBI,QAAQ;oBAACC,qBAAa;iBAAC;gBAEvBC,YAAY,CAACC;oBACT,MAAMC,cAAcD,cAAcE,GAAG,CAAC,gBAAgB;oBAEtDC,QAAQC,GAAG,CAAC,iBAAiBH;oBAC7BE,QAAQC,GAAG,CAACC,mBAAiB,CAACC,OAAO;oBAGrC,OAAO,wCACAD,mBAAiB,CAACC,OAAO;wBAC5BC,kBAAkB;wBAClBC,kBAAkB;;gBAE1B;YACJ;YACAb,sBAAa,CAACc,UAAU,CAAC;gBACrBC,gBAAI;gBACJC,kBAAK;gBACLC,gBAAI;gBACJC,oBAAK;gBACLC,sBAAO;gBACPC,8BAAW;gBACXC,kBAAK;gBACLC,iBAAI;gBACJC,wBAAQ;gBACRC,0BAAS;gBACTC,0BAAY;gBACZC,wBAAU;gBACVC,wBAAQ;gBACRC,gCAAY;aACf;YACDC,4BAAa;YACbC,wCAAsB;YACtBC,oBAAS;YACTC,wBAAW;YACXC,wCAAmB;YACnBC,sBAAU;YACVC,sBAAU;YACVC,kCAAgB;YAChBC,oBAAS;YACTC,4BAAa;YACbC,0BAAY;YACZC,gCAAe;YACfC,wBAAW;YACXC,yBAAY;YACZC,4BAAa;YACbC,wBAAW;YACXC,8BAAc;YACdC,gCAAe;YACfC,8BAAc;YACdC,oBAAS;YACTC,4BAAa;YACbC,oCAAiB;YACjBC,sCAAkB;YAClBC,0BAAY;YACZC,iBAAU;SACb;QACDC,aAAa;YAACC,4BAAa;SAAE;QAC7BC,WAAW;YACPC,sBAAU;YACVC,wBAAW;YACXC,wBAAW;YACXC,sBAAU;YACVC,wCAAmB;YACnBC,wBAAW;YACX;gBACIC,SAASC,eAAS;gBAClBC,UAAUC,sBAAY;YAC1B;YACA;gBACIH,SAASC,eAAS;gBAClBC,UAAUE,sBAAU;YACxB;YACA;gBACIJ,SAASK,qBAAe;gBACxBH,UAAUI,qCAAkB;YAChC;YACA;gBACIN,SAASO,gBAAU;gBACnBL,UAAUM,gCAAmB;YACjC;SACH;QACDC,SAAS;YAACb,wBAAW;SAAC"}