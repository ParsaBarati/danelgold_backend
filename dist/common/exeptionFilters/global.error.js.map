{"version":3,"sources":["../../../src/common/exeptionFilters/global.error.ts"],"sourcesContent":["import {\n  ExceptionFilter,\n  Catch,\n  ArgumentsHost,\n  HttpException,\n  HttpStatus,\n} from '@nestjs/common';\n\n@Catch()\nexport class AllExceptionsFilter implements ExceptionFilter {\n  catch(exception: unknown, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse();\n    const request = ctx.getRequest();\n    const status =\n      exception instanceof HttpException\n        ? exception.getStatus()\n        : HttpStatus.INTERNAL_SERVER_ERROR;\n\n    const message =\n      exception instanceof HttpException\n        ? exception.getResponse()\n        : 'Internal server error  ';\n\n    console.error(`[${new Date().toISOString()}] ${status} - ${message}`);\n    console.error(exception);\n\n    response.status(status).json({\n      statusCode: status,\n      message: message,\n      timestamp: new Date().toISOString(),\n      path: request.url,\n    });\n  }\n}\n"],"names":["AllExceptionsFilter","catch","exception","host","ctx","switchToHttp","response","getResponse","request","getRequest","status","HttpException","getStatus","HttpStatus","INTERNAL_SERVER_ERROR","message","console","error","Date","toISOString","json","statusCode","timestamp","path","url"],"mappings":";;;;+BASaA;;;eAAAA;;;wBAHN;;;;;;;AAGA,IAAA,AAAMA,sBAAN,MAAMA;IACXC,MAAMC,SAAkB,EAAEC,IAAmB,EAAE;QAC7C,MAAMC,MAAMD,KAAKE,YAAY;QAC7B,MAAMC,WAAWF,IAAIG,WAAW;QAChC,MAAMC,UAAUJ,IAAIK,UAAU;QAC9B,MAAMC,SACJR,qBAAqBS,qBAAa,GAC9BT,UAAUU,SAAS,KACnBC,kBAAU,CAACC,qBAAqB;QAEtC,MAAMC,UACJb,qBAAqBS,qBAAa,GAC9BT,UAAUK,WAAW,KACrB;QAENS,QAAQC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAIC,OAAOC,WAAW,GAAG,EAAE,EAAET,OAAO,GAAG,EAAEK,QAAQ,CAAC;QACpEC,QAAQC,KAAK,CAACf;QAEdI,SAASI,MAAM,CAACA,QAAQU,IAAI,CAAC;YAC3BC,YAAYX;YACZK,SAASA;YACTO,WAAW,IAAIJ,OAAOC,WAAW;YACjCI,MAAMf,QAAQgB,GAAG;QACnB;IACF;AACF"}